Grammar:

cmdline:
    assgn
    arglist

assgn:
    name '=' expression

name:
    namstart
    namstart namend

namstart:
    (?![ ={}()"+*/%[:digit:]-])[[:graph:]]

namend:
    namchar
    namchar namend

namchar:
    (?![ ={}()"+*/%-])[[:graph:]]

expression:
    stringexpr
    blockexpr
    symbolexpr
    intexpr

stringexpr:
    '"' text '"'

text:
    textchar
    textchar text

textchar:
    (?![\n%"])[[:graph:]]
    formatseq

formatseq:
    '%' formatspec

formatspec:
    [NPQ]

intexpr:
    logicexpr

logicexpr:
    equalityexpr
    equalityexpr logop logicexpr

equalityexpr:
    addexpr
    addexpr eqop equalityexpr

addexpr:
    mulexpr
    mulexpr addop addexpr

mulexpr:
    term
    term mulop mulexpr

term:
    name
    intterm
    parenterm
    block

intterm:
    intchar
    intchar intterm

intchar:
    [[:digit:]]

parenterm:
    '(' intexpr ')

block:
    '{' cmdlist '}

cmdlist:
    cmdlin
    cmdlin '\n' cmdlist

logop:
    [&|]

eqop:
    (==|!=|<|>|<=|>=)

addop:
    [+-]

mulop:
    [*/%]

arglist:
    word
    word space arglist

space:
    ' '
    ' ' space

